!function(T,Z){"object"==typeof exports&&typeof module<"u"?module.exports=Z():"function"==typeof define&&define.amd?define(Z):(T=T||self).ScrollReveal=Z()}(this,function(){"use strict";var T={delay:0,distance:"0",duration:600,easing:"cubic-bezier(0.5, 0, 0, 1)",interval:0,opacity:0,origin:"bottom",rotate:{x:0,y:0,z:0},scale:1,cleanup:!1,container:document.documentElement,desktop:!0,mobile:!0,reset:!1,useDelay:"always",viewFactor:0,viewOffset:{top:0,right:0,bottom:0,left:0},afterReset:function(){},afterReveal:function(){},beforeReset:function(){},beforeReveal:function(){}},w_success=function te(){document.documentElement.classList.add("sr"),document.body?document.body.style.height="100%":document.addEventListener("DOMContentLoaded",function(){document.body.style.height="100%"})},w_failure=function Z(){return document.documentElement.classList.remove("sr"),{clean:function(){},destroy:function(){},reveal:function(){},sync:function(){},get noop(){return!0}}};function rt(i){return"object"==typeof window.Node?i instanceof window.Node:null!==i&&"object"==typeof i&&"number"==typeof i.nodeType&&"string"==typeof i.nodeName}function D(i,r){if(void 0===r&&(r=document),i instanceof Array)return i.filter(rt);if(rt(i))return[i];if(function J(i){var r=Object.prototype.toString.call(i);return"object"==typeof window.NodeList?i instanceof window.NodeList:null!==i&&"object"==typeof i&&"number"==typeof i.length&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(r)&&(0===i.length||rt(i[0]))}(i))return Array.prototype.slice.call(i);if("string"==typeof i)try{var o=r.querySelectorAll(i);return Array.prototype.slice.call(o)}catch{return[]}return[]}function ot(i){return null!==i&&i instanceof Object&&(i.constructor===Object||"[object Object]"===Object.prototype.toString.call(i))}function p(i,r){if(ot(i))return Object.keys(i).forEach(function(a){return r(i[a],a,i)});if(i instanceof Array)return i.forEach(function(a,u){return r(a,u,i)});throw new TypeError("Expected either an array or object literal.")}function q(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];if(this.constructor.debug&&console){var a="%cScrollReveal: "+i;r.forEach(function(u){return a+="\n \u2014 "+u}),console.log(a,"color: #ea654b;")}}function pt(){var i=this,o={active:[],stale:[]},a={active:[],stale:[]},u={active:[],stale:[]};try{p(D("[data-sr-id]"),function(l){var d=parseInt(l.getAttribute("data-sr-id"));o.active.push(d)})}catch(l){throw l}p(this.store.elements,function(l){-1===o.active.indexOf(l.id)&&o.stale.push(l.id)}),p(o.stale,function(l){return delete i.store.elements[l]}),p(this.store.elements,function(l){-1===u.active.indexOf(l.containerId)&&u.active.push(l.containerId),l.hasOwnProperty("sequence")&&-1===a.active.indexOf(l.sequence.id)&&a.active.push(l.sequence.id)}),p(this.store.containers,function(l){-1===u.active.indexOf(l.id)&&u.stale.push(l.id)}),p(u.stale,function(l){var d=i.store.containers[l].node;d.removeEventListener("scroll",i.delegate),d.removeEventListener("resize",i.delegate),delete i.store.containers[l]}),p(this.store.sequences,function(l){-1===a.active.indexOf(l.id)&&a.stale.push(l.id)}),p(a.stale,function(l){return delete i.store.sequences[l]})}function vt(i){if(i.constructor!==Array)throw new TypeError("Expected array.");if(16===i.length)return i;if(6===i.length){var r=j();return r[0]=i[0],r[1]=i[1],r[4]=i[2],r[5]=i[3],r[12]=i[4],r[13]=i[5],r}throw new RangeError("Expected array with either 6 or 16 values.")}function j(){for(var i=[],r=0;r<16;r++)i.push(r%5==0?1:0);return i}function gt(i,r){for(var o=vt(i),a=vt(r),u=[],l=0;l<4;l++)for(var d=[o[l],o[l+4],o[l+8],o[l+12]],A=0;A<4;A++){var O=4*A,v=[a[O],a[O+1],a[O+2],a[O+3]];u[l+O]=d[0]*v[0]+d[1]*v[1]+d[2]*v[2]+d[3]*v[3]}return u}function Lt(i){if("string"==typeof i){var r=i.match(/matrix(3d)?\(([^)]+)\)/);if(r)return vt(r[2].split(", ").map(parseFloat))}return j()}var Yt=function(){var i={},r=document.documentElement.style;function o(a,u){if(void 0===u&&(u=r),a&&"string"==typeof a){if(i[a])return i[a];if("string"==typeof u[a])return i[a]=a;if("string"==typeof u["-webkit-"+a])return i[a]="-webkit-"+a;throw new RangeError('Unable to find "'+a+'" style property.')}throw new TypeError("Expected a string.")}return o.clearCache=function(){return i={}},o}();function Xt(i){var r=window.getComputedStyle(i.node),o=r.position,a=i.config,u={},d=(i.node.getAttribute("style")||"").match(/[\w-]+\s*:\s*[^;]+\s*/gi)||[];u.computed=d?d.map(function(R){return R.trim()}).join("; ")+";":"",u.generated=d.some(function(R){return R.match(/visibility\s?:\s?visible/i)})?u.computed:d.concat(["visibility: visible"]).map(function(R){return R.trim()}).join("; ")+";";var A=parseFloat(r.opacity),O=isNaN(parseFloat(a.opacity))?parseFloat(r.opacity):parseFloat(a.opacity),v={computed:A!==O?"opacity: "+A+";":"",generated:A!==O?"opacity: "+O+";":""},E=[];if(parseFloat(a.distance)){var y="top"===a.origin||"bottom"===a.origin?"Y":"X",x=a.distance;("top"===a.origin||"left"===a.origin)&&(x=/^-/.test(x)?x.substr(1):"-"+x);var G=x.match(/(^-?\d+\.?\d?)|(em$|px$|%$)/g),F=G[0];switch(G[1]){case"em":x=parseInt(r.fontSize)*F;break;case"px":x=F;break;case"%":x="Y"===y?i.node.getBoundingClientRect().height*F/100:i.node.getBoundingClientRect().width*F/100;break;default:throw new RangeError("Unrecognized or missing distance unit.")}E.push("Y"===y?function mt(i){var r=j();return r[13]=i,r}(x):function Ft(i){var r=j();return r[12]=i,r}(x))}a.rotate.x&&E.push(function U(i){var r=Math.PI/180*i,o=j();return o[5]=o[10]=Math.cos(r),o[6]=o[9]=Math.sin(r),o[9]*=-1,o}(a.rotate.x)),a.rotate.y&&E.push(function yt(i){var r=Math.PI/180*i,o=j();return o[0]=o[10]=Math.cos(r),o[2]=o[8]=Math.sin(r),o[2]*=-1,o}(a.rotate.y)),a.rotate.z&&E.push(function K(i){var r=Math.PI/180*i,o=j();return o[0]=o[5]=Math.cos(r),o[1]=o[4]=Math.sin(r),o[4]*=-1,o}(a.rotate.z)),1!==a.scale&&E.push(function st(i,r){var o=j();return o[0]=i,o[5]="number"==typeof r?r:i,o}(0===a.scale?2e-4:a.scale));var S={};if(E.length){S.property=Yt("transform"),S.computed={raw:r[S.property],matrix:Lt(r[S.property])},E.unshift(S.computed.matrix);var ue=E.reduce(gt);S.generated={initial:S.property+": matrix3d("+ue.join(", ")+");",final:S.property+": matrix3d("+S.computed.matrix.join(", ")+");"}}else S.generated={initial:"",final:""};var m={};if(v.generated||S.generated.initial){m.property=Yt("transition"),m.computed=r[m.property],m.fragments=[];var Bt=a.delay,it=a.duration,Ot=a.easing;v.generated&&m.fragments.push({delayed:"opacity "+it/1e3+"s "+Ot+" "+Bt/1e3+"s",instant:"opacity "+it/1e3+"s "+Ot+" 0s"}),S.generated.initial&&m.fragments.push({delayed:S.property+" "+it/1e3+"s "+Ot+" "+Bt/1e3+"s",instant:S.property+" "+it/1e3+"s "+Ot+" 0s"}),m.computed&&!m.computed.match(/all 0s|none 0s/)&&m.fragments.unshift({delayed:m.computed,instant:m.computed});var P=m.fragments.reduce(function(R,g,C){return R.delayed+=0===C?g.delayed:", "+g.delayed,R.instant+=0===C?g.instant:", "+g.instant,R},{delayed:"",instant:""});m.generated={delayed:m.property+": "+P.delayed+";",instant:m.property+": "+P.instant+";"}}else m.generated={delayed:"",instant:""};return{inline:u,opacity:v,position:o,transform:S,transition:m}}function I(i,r){r.split(";").forEach(function(o){var a=o.split(":"),u=a[0],l=a.slice(1);u&&l&&(i.style[u.trim()]=l.join(":"))})}function St(i){var o,r=this;try{p(D(i),function(a){var u=a.getAttribute("data-sr-id");if(null!==u){o=!0;var l=r.store.elements[u];l.callbackTimer&&window.clearTimeout(l.callbackTimer.clock),I(l.node,l.styles.inline.generated),a.removeAttribute("data-sr-id"),delete r.store.elements[u]}})}catch(a){return q.call(this,"Clean failed.",a.message)}if(o)try{pt.call(this)}catch(a){return q.call(this,"Clean failed.",a.message)}}function ee(){var i=this;p(this.store.elements,function(r){I(r.node,r.styles.inline.generated),r.node.removeAttribute("data-sr-id")}),p(this.store.containers,function(r){var o=r.node===document.documentElement?window:r.node;o.removeEventListener("scroll",i.delegate),o.removeEventListener("resize",i.delegate)}),this.store={containers:{},elements:{},history:[],sequences:{}}}function at(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];if(ot(i))return p(r,function(a){p(a,function(u,l){ot(u)?((!i[l]||!ot(i[l]))&&(i[l]={}),at(i[l],u)):i[l]=u})}),i;throw new TypeError("Target must be an object literal.")}function Tt(i){return void 0===i&&(i=navigator.userAgent),/Android|iPhone|iPad|iPod/i.test(i)}var Rt=function(){var i=0;return function(){return i++}}();function Ct(){var i=this;pt.call(this),p(this.store.elements,function(r){var o=[r.styles.inline.generated];r.visible?(o.push(r.styles.opacity.computed),o.push(r.styles.transform.generated.final),r.revealed=!0):(o.push(r.styles.opacity.generated),o.push(r.styles.transform.generated.initial),r.revealed=!1),I(r.node,o.filter(function(a){return""!==a}).join(" "))}),p(this.store.containers,function(r){var o=r.node===document.documentElement?window:r.node;o.addEventListener("scroll",i.delegate),o.addEventListener("resize",i.delegate)}),this.delegate(),this.initTimeout=null}function Q(i,r){void 0===r&&(r={});var l=!i.visible&&i.revealed&&i.config.reset;return r.reveal||i.visible&&!i.revealed?Wt.call(this,i,"always"===i.config.useDelay||"onload"===i.config.useDelay&&(r.pristine||this.pristine)||"once"===i.config.useDelay&&!i.seen):r.reset||l?$t.call(this,i):void 0}function Wt(i,r){var o=[i.styles.inline.generated,i.styles.opacity.computed,i.styles.transform.generated.final];o.push(r?i.styles.transition.generated.delayed:i.styles.transition.generated.instant),i.revealed=i.seen=!0,I(i.node,o.filter(function(a){return""!==a}).join(" ")),ut.call(this,i,r)}function $t(i){var r=[i.styles.inline.generated,i.styles.opacity.generated,i.styles.transform.generated.initial,i.styles.transition.generated.instant];i.revealed=!1,I(i.node,r.filter(function(o){return""!==o}).join(" ")),ut.call(this,i)}function ut(i,r){var o=this,a=r?i.config.duration+i.config.delay:i.config.duration,u=i.revealed?i.config.beforeReveal:i.config.beforeReset,l=i.revealed?i.config.afterReveal:i.config.afterReset,d=0;i.callbackTimer&&(d=Date.now()-i.callbackTimer.start,window.clearTimeout(i.callbackTimer.clock)),u(i.node),i.callbackTimer={start:Date.now(),clock:window.setTimeout(function(){l(i.node),i.callbackTimer=null,i.revealed&&!i.config.reset&&i.config.cleanup&&St.call(o,i.node)},a-d)}}function bt(i,r){if(void 0===r&&(r=this.pristine),!i.visible&&i.revealed&&i.config.reset)return Q.call(this,i,{reset:!0});var o=this.store.sequences[i.sequence.id],a=i.sequence.index;if(o){var u=new Ht(o,"visible",this.store),l=new Ht(o,"revealed",this.store);if(o.models={visible:u,revealed:l},!l.body.length){var A=this.store.elements[o.members[u.body[0]]];if(A)return V.call(this,o,u.body[0],-1,r),V.call(this,o,u.body[0],1,r),Q.call(this,A,{reveal:!0,pristine:r})}if(!o.blocked.head&&a===[].concat(l.head).pop()&&a>=[].concat(u.body).shift())return V.call(this,o,a,-1,r),Q.call(this,i,{reveal:!0,pristine:r});if(!o.blocked.foot&&a===[].concat(l.foot).shift()&&a<=[].concat(u.body).pop())return V.call(this,o,a,1,r),Q.call(this,i,{reveal:!0,pristine:r})}}function ie(i){var r=Math.abs(i);if(isNaN(r))throw new RangeError("Invalid sequence interval.");this.id=Rt(),this.interval=Math.max(r,16),this.members=[],this.models={},this.blocked={head:!1,foot:!1}}function Ht(i,r,o){var a=this;this.head=[],this.body=[],this.foot=[],p(i.members,function(u,l){var d=o.elements[u];d&&d[r]&&a.body.push(l)}),this.body.length&&p(i.members,function(u,l){var d=o.elements[u];d&&!d[r]&&(l<a.body[0]?a.head.push(l):a.foot.push(l))})}function V(i,r,o,a){var u=this,l=["head",null,"foot"][1+o],A=this.store.elements[i.members[r+o]];i.blocked[l]=!0,setTimeout(function(){i.blocked[l]=!1,A&&bt.call(u,A,a)},i.interval)}function wt(i,r,o){var a=this;void 0===r&&(r={}),void 0===o&&(o=!1);var l,u=[],d=r.interval||T.interval;try{d&&(l=new ie(d));var A=D(i);if(!A.length)throw new Error("Invalid reveal target.");var O=A.reduce(function(v,E){var y={},x=E.getAttribute("data-sr-id");x?(at(y,a.store.elements[x]),I(y.node,y.styles.inline.computed)):(y.id=Rt(),y.node=E,y.seen=!1,y.revealed=!1,y.visible=!1);var G=at({},y.config||a.defaults,r);if(!G.mobile&&Tt()||!G.desktop&&!Tt())return x&&St.call(a,y),v;var X,F=D(G.container)[0];if(!F)throw new Error("Invalid container.");return F.contains(E)?(X=function Ut(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];var a=null;return p(r,function(u){p(u,function(l){null===a&&l.node===i&&(a=l.id)})}),a}(F,u,a.store.containers),null===X&&(X=Rt(),u.push({id:X,node:F})),y.config=G,y.containerId=X,y.styles=Xt(y),l&&(y.sequence={id:l.id,index:l.members.length},l.members.push(y.id)),v.push(y),v):v},[]);p(O,function(v){a.store.elements[v.id]=v,v.node.setAttribute("data-sr-id",v.id)})}catch(v){return q.call(this,"Reveal failed.",v.message)}p(u,function(v){a.store.containers[v.id]={id:v.id,node:v.node}}),l&&(this.store.sequences[l.id]=l),!0!==o&&(this.store.history.push({target:i,options:r}),this.initTimeout&&window.clearTimeout(this.initTimeout),this.initTimeout=window.setTimeout(Ct.bind(this),0))}function ne(){var i=this;p(this.store.history,function(r){wt.call(i,r.target,r.options,!0)}),Ct.call(this)}var i,At,tt,M,et,ct,_,lt,ht,Vt=Math.sign||function(i){return(i>0)-(i<0)||+i},It=(i=Date.now(),function(r){var o=Date.now();o-i>16?(i=o,r(o)):setTimeout(function(){return It(r)},0)}),re=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||It;function xt(i,r){var o=r?i.node.clientHeight:i.node.offsetHeight,a=r?i.node.clientWidth:i.node.offsetWidth,u=0,l=0,d=i.node;do{isNaN(d.offsetTop)||(u+=d.offsetTop),isNaN(d.offsetLeft)||(l+=d.offsetLeft),d=d.offsetParent}while(d);return{bounds:{top:u,right:l+a,bottom:u+o,left:l},height:o,width:a}}function oe(i){var r,o;return i.node===document.documentElement?(r=window.pageYOffset,o=window.pageXOffset):(r=i.node.scrollTop,o=i.node.scrollLeft),{top:r,left:o}}function Dt(i){void 0===i&&(i={});var r=this.store.containers[i.containerId];if(r){var o=Math.max(0,Math.min(1,i.config.viewFactor)),a=i.config.viewOffset,u={top:i.geometry.bounds.top+i.geometry.height*o,right:i.geometry.bounds.right-i.geometry.width*o,bottom:i.geometry.bounds.bottom-i.geometry.height*o,left:i.geometry.bounds.left+i.geometry.width*o},l={top:r.geometry.bounds.top+r.scroll.top+a.top,right:r.geometry.bounds.right+r.scroll.left-a.right,bottom:r.geometry.bounds.bottom+r.scroll.top-a.bottom,left:r.geometry.bounds.left+r.scroll.left+a.left};return u.top<l.bottom&&u.right>l.left&&u.bottom>l.top&&u.left<l.right||"fixed"===i.styles.position}}function se(i,r){var o=this;void 0===i&&(i={type:"init"}),void 0===r&&(r=this.store.elements),re(function(){var a="init"===i.type||"resize"===i.type;p(o.store.containers,function(u){a&&(u.geometry=xt.call(o,u,!0));var l=oe.call(o,u);u.scroll&&(u.direction={x:Vt(l.left-u.scroll.left),y:Vt(l.top-u.scroll.top)}),u.scroll=l}),p(r,function(u){(a||void 0===u.geometry)&&(u.geometry=xt.call(o,u)),u.visible=Dt.call(o,u)}),p(r,function(u){u.sequence?bt.call(o,u):Q.call(o,u)}),o.pristine=!1})}function k(i){var o;if(void 0===i&&(i={}),typeof this>"u"||Object.getPrototypeOf(this)!==k.prototype)return new k(i);if(!k.isSupported())return q.call(this,"Instantiation failed.","This browser is not supported."),w_failure();try{o=at({},_||T,i)}catch(u){return q.call(this,"Invalid configuration.",u.message),w_failure()}try{if(!D(o.container)[0])throw new Error("Invalid container.")}catch(u){return q.call(this,u.message),w_failure()}return!(_=o).mobile&&Tt()||!_.desktop&&!Tt()?(q.call(this,"This device is disabled.","desktop: "+_.desktop,"mobile: "+_.mobile),w_failure()):(w_success(),this.store={containers:{},elements:{},history:[],sequences:{}},this.pristine=!0,At=At||se.bind(this),tt=tt||ee.bind(this),M=M||wt.bind(this),et=et||St.bind(this),ct=ct||ne.bind(this),Object.defineProperty(this,"delegate",{get:function(){return At}}),Object.defineProperty(this,"destroy",{get:function(){return tt}}),Object.defineProperty(this,"reveal",{get:function(){return M}}),Object.defineProperty(this,"clean",{get:function(){return et}}),Object.defineProperty(this,"sync",{get:function(){return ct}}),Object.defineProperty(this,"defaults",{get:function(){return _}}),Object.defineProperty(this,"version",{get:function(){return"4.0.9"}}),Object.defineProperty(this,"noop",{get:function(){return!1}}),ht||(ht=this))}return k.isSupported=function(){return function ae(){var i=document.documentElement.style;return"transform"in i||"WebkitTransform"in i}()&&function L(){var i=document.documentElement.style;return"transition"in i||"WebkitTransition"in i}()},Object.defineProperty(k,"debug",{get:function(){return lt||!1},set:function(i){return lt="boolean"==typeof i?i:lt}}),k(),k}),function(T,Z,te,w){"use strict";function rt(t,e,n){return setTimeout(q(t,n),e)}function J(t,e,n){return!!Array.isArray(t)&&(D(t,n[e],n),!0)}function D(t,e,n){var s;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==w)for(s=0;s<t.length;)e.call(n,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(n,t[s],s,t)}function ot(t,e,n){var s="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var c=new Error("get-stack-trace"),h=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=T.console&&(T.console.warn||T.console.log);return f&&f.call(T.console,s,h),t.apply(this,arguments)}}function p(t,e,n){var s,c=e.prototype;(s=t.prototype=Object.create(c)).constructor=t,s._super=c,n&&u(s,n)}function q(t,e){return function(){return t.apply(e,arguments)}}function pt(t,e){return typeof t==A?t.apply(e&&e[0]||w,e):t}function vt(t,e){return t===w?e:t}function j(t,e,n){D(yt(e),function(s){t.addEventListener(s,n,!1)})}function gt(t,e,n){D(yt(e),function(s){t.removeEventListener(s,n,!1)})}function Lt(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function U(t,e){return t.indexOf(e)>-1}function yt(t){return t.trim().split(/\s+/g)}function K(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var s=0;s<t.length;){if(n&&t[s][n]==e||!n&&t[s]===e)return s;s++}return-1}function st(t){return Array.prototype.slice.call(t,0)}function Ft(t,e,n){for(var s=[],c=[],h=0;h<t.length;){var f=e?t[h][e]:t[h];K(c,f)<0&&s.push(t[h]),c[h]=f,h++}return n&&(s=e?s.sort(function(b,Y){return b[e]>Y[e]}):s.sort()),s}function mt(t,e){for(var n,s,c=e[0].toUpperCase()+e.slice(1),h=0;h<l.length;){if((s=(n=l[h])?n+c:e)in t)return s;h++}return w}function Xt(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||T}function I(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){pt(t.options.enable,[t])&&n.handler(s)},this.init()}function ee(t,e,n){var s=n.pointers.length,c=n.changedPointers.length,h=e&P&&s-c==0,f=e&(g|C)&&s-c==0;n.isFirst=!!h,n.isFinal=!!f,h&&(t.session={}),n.eventType=e,function at(t,e){var n=t.session,s=e.pointers,c=s.length;n.firstInput||(n.firstInput=Ct(e)),c>1&&!n.firstMultiple?n.firstMultiple=Ct(e):1===c&&(n.firstMultiple=!1);var h=n.firstInput,f=n.firstMultiple,b=f?f.center:h.center,Y=e.center=Q(s);e.timeStamp=E(),e.deltaTime=e.timeStamp-h.timeStamp,e.angle=bt(b,Y),e.distance=ut(b,Y),function Tt(t,e){var n=e.center,s=t.offsetDelta||{},c=t.prevDelta||{},h=t.prevInput||{};e.eventType!==P&&h.eventType!==g||(c=t.prevDelta={x:h.deltaX||0,y:h.deltaY||0},s=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=c.x+(n.x-s.x),e.deltaY=c.y+(n.y-s.y)}(n,e),e.offsetDirection=$t(e.deltaX,e.deltaY);var N=Wt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=N.x,e.overallVelocityY=N.y,e.overallVelocity=v(N.x)>v(N.y)?N.x:N.y,e.scale=f?function Ht(t,e){return ut(e[0],e[1],Jt)/ut(t[0],t[1],Jt)}(f.pointers,s):1,e.rotation=f?function ie(t,e){return bt(e[1],e[0],Jt)+bt(t[1],t[0],Jt)}(f.pointers,s):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function Rt(t,e){var n,s,c,h,f=t.lastInterval||e,b=e.timeStamp-f.timeStamp;if(e.eventType!=C&&(b>ce||f.velocity===w)){var Y=e.deltaX-f.deltaX,N=e.deltaY-f.deltaY,H=Wt(b,Y,N);s=H.x,c=H.y,n=v(H.x)>v(H.y)?H.x:H.y,h=$t(Y,N),t.lastInterval=e}else n=f.velocity,s=f.velocityX,c=f.velocityY,h=f.direction;e.velocity=n,e.velocityX=s,e.velocityY=c,e.direction=h}(n,e);var H=t.element;Lt(e.srcEvent.target,H)&&(H=e.srcEvent.target),e.target=H}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function Ct(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:O(t.pointers[n].clientX),clientY:O(t.pointers[n].clientY)},n++;return{timeStamp:E(),pointers:e,center:Q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Q(t){var e=t.length;if(1===e)return{x:O(t[0].clientX),y:O(t[0].clientY)};for(var n=0,s=0,c=0;e>c;)n+=t[c].clientX,s+=t[c].clientY,c++;return{x:O(n/e),y:O(s/e)}}function Wt(t,e,n){return{x:e/t||0,y:n/t||0}}function $t(t,e){return t===e?Zt:v(t)>=v(e)?0>t?Mt:jt:0>e?Nt:_t}function ut(t,e,n){n||(n=fe);var s=e[n[0]]-t[n[0]],c=e[n[1]]-t[n[1]];return Math.sqrt(s*s+c*c)}function bt(t,e,n){return n||(n=fe),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}function V(){this.evEl=Ee,this.evWin=Ie,this.pressed=!1,I.apply(this,arguments)}function wt(){this.evEl=de,this.evWin=pe,I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Ut(){this.evTarget=Se,this.evWin=Re,this.started=!1,I.apply(this,arguments)}function ne(t,e){var n=st(t.touches),s=st(t.changedTouches);return e&(g|C)&&(n=Ft(n.concat(s),"identifier",!0)),[n,s]}function Et(){this.evTarget=xe,this.targetIds={},I.apply(this,arguments)}function Vt(t,e){var n=st(t.touches),s=this.targetIds;if(e&(P|R)&&1===n.length)return s[n[0].identifier]=!0,[n,n];var c,h,f=st(t.changedTouches),b=[],Y=this.target;if(h=n.filter(function(N){return Lt(N.target,Y)}),e===P)for(c=0;c<h.length;)s[h[c].identifier]=!0,c++;for(c=0;c<f.length;)s[f[c].identifier]&&b.push(f[c]),e&(g|C)&&delete s[f[c].identifier],c++;return b.length?[Ft(h.concat(b),"identifier",!0),b]:void 0}function It(){I.apply(this,arguments);var t=q(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new V(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function re(t,e){t&P?(this.primaryTouch=e.changedPointers[0].identifier,xt.call(this,e)):t&(g|C)&&xt.call(this,e)}function xt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var s=this.lastTouches;setTimeout(function(){var h=s.indexOf(n);h>-1&&s.splice(h,1)},De)}}function oe(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var c=this.lastTouches[s],h=Math.abs(e-c.x),f=Math.abs(n-c.y);if(ve>=h&&ve>=f)return!0}return!1}function Dt(t,e){this.manager=t,this.set(e)}function L(t){this.options=u({},this.defaults,t||{}),this.id=function Yt(){return G++}(),this.manager=null,this.options.enable=vt(this.options.enable,!0),this.state=Qt,this.simultaneous={},this.requireFail=[]}function Gt(t){return t&qt?"cancel":t&nt?"end":t&Pt?"move":t&z?"start":""}function At(t){return t==_t?"down":t==Nt?"up":t==Mt?"left":t==jt?"right":""}function tt(t,e){var n=e.manager;return n?n.get(t):t}function M(){L.apply(this,arguments)}function et(){M.apply(this,arguments),this.pX=null,this.pY=null}function ct(){M.apply(this,arguments)}function _(){L.apply(this,arguments),this._timer=null,this._input=null}function lt(){M.apply(this,arguments)}function ht(){M.apply(this,arguments)}function k(){L.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function i(t,e){return(e=e||{}).recognizers=vt(e.recognizers,i.defaults.preset),new r(t,e)}function r(t,e){this.options=u({},i.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function St(t){return new(t.options.inputClass||(S?wt:ue?Et:X?It:V))(t,ee)}(this),this.touchAction=new Dt(this,this.options.touchAction),o(this,!0),D(this.options.recognizers,function(n){var s=this.add(new n[0](n[1]));n[2]&&s.recognizeWith(n[2]),n[3]&&s.requireFailure(n[3])},this)}function o(t,e){var s,n=t.element;n.style&&(D(t.options.cssProps,function(c,h){s=mt(n.style,h),e?(t.oldCssProps[s]=n.style[s],n.style[s]=c):n.style[s]=t.oldCssProps[s]||""}),e||(t.oldCssProps={}))}var u,l=["","webkit","Moz","MS","ms","o"],d=Z.createElement("div"),A="function",O=Math.round,v=Math.abs,E=Date.now;u="function"!=typeof Object.assign?function(t){if(t===w||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var s=arguments[n];if(s!==w&&null!==s)for(var c in s)s.hasOwnProperty(c)&&(e[c]=s[c])}return e}:Object.assign;var y=ot(function(t,e,n){for(var s=Object.keys(e),c=0;c<s.length;)(!n||n&&t[s[c]]===w)&&(t[s[c]]=e[s[c]]),c++;return t},"extend","Use `assign`."),x=ot(function(t,e){return y(t,e,!0)},"merge","Use `assign`."),G=1,X="ontouchstart"in T,S=mt(T,"PointerEvent")!==w,ue=X&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),m="touch",it="mouse",ce=25,P=1,R=2,g=4,C=8,Zt=1,Mt=2,jt=4,Nt=8,_t=16,W=Mt|jt,ft=Nt|_t,he=W|ft,fe=["x","y"],Jt=["clientX","clientY"];I.prototype={handler:function(){},init:function(){this.evEl&&j(this.element,this.evEl,this.domHandler),this.evTarget&&j(this.target,this.evTarget,this.domHandler),this.evWin&&j(Xt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&gt(this.element,this.evEl,this.domHandler),this.evTarget&&gt(this.target,this.evTarget,this.domHandler),this.evWin&&gt(Xt(this.element),this.evWin,this.domHandler)}};var we={mousedown:P,mousemove:R,mouseup:g},Ee="mousedown",Ie="mousemove mouseup";p(V,I,{handler:function(t){var e=we[t.type];e&P&&0===t.button&&(this.pressed=!0),e&R&&1!==t.which&&(e=g),this.pressed&&(e&g&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:it,srcEvent:t}))}});var Ae={pointerdown:P,pointermove:R,pointerup:g,pointercancel:C,pointerout:C},Oe={2:m,3:"pen",4:it,5:"kinect"},de="pointerdown",pe="pointermove pointerup pointercancel";T.MSPointerEvent&&!T.PointerEvent&&(de="MSPointerDown",pe="MSPointerMove MSPointerUp MSPointerCancel"),p(wt,I,{handler:function(t){var e=this.store,n=!1,s=t.type.toLowerCase().replace("ms",""),c=Ae[s],h=Oe[t.pointerType]||t.pointerType,f=h==m,b=K(e,t.pointerId,"pointerId");c&P&&(0===t.button||f)?0>b&&(e.push(t),b=e.length-1):c&(g|C)&&(n=!0),0>b||(e[b]=t,this.callback(this.manager,c,{pointers:e,changedPointers:[t],pointerType:h,srcEvent:t}),n&&e.splice(b,1))}});var Pe={touchstart:P,touchmove:R,touchend:g,touchcancel:C},Se="touchstart",Re="touchstart touchmove touchend touchcancel";p(Ut,I,{handler:function(t){var e=Pe[t.type];if(e===P&&(this.started=!0),this.started){var n=ne.call(this,t,e);e&(g|C)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:m,srcEvent:t})}}});var Ce={touchstart:P,touchmove:R,touchend:g,touchcancel:C},xe="touchstart touchmove touchend touchcancel";p(Et,I,{handler:function(t){var e=Ce[t.type],n=Vt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:m,srcEvent:t})}});var De=2500,ve=25;p(It,I,{handler:function(t,e,n){var c=n.pointerType==it;if(!(c&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(n.pointerType==m)re.call(this,e,n);else if(c&&oe.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ge=mt(d.style,"touchAction"),ye=ge!==w,me="compute",le="manipulation",dt="none",kt="pan-x",zt="pan-y",Kt=function ae(){if(!ye)return!1;var t={},e=T.CSS&&T.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||T.CSS.supports("touch-action",n)}),t}();Dt.prototype={set:function(t){t==me&&(t=this.compute()),ye&&this.manager.element.style&&Kt[t]&&(this.manager.element.style[ge]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return D(this.manager.recognizers,function(e){pt(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function se(t){if(U(t,dt))return dt;var e=U(t,kt),n=U(t,zt);return e&&n?dt:e||n?e?kt:zt:U(t,le)?le:"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(!this.manager.session.prevented){var s=this.actions,c=U(s,dt)&&!Kt[dt],h=U(s,zt)&&!Kt[zt],f=U(s,kt)&&!Kt[kt];if(c&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;return f&&h?void 0:c||h&&n&W||f&&n&ft?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Qt=1,z=2,Pt=4,nt=8,B=nt,qt=16,$=32;L.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(J(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=tt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return J(t,"dropRecognizeWith",this)||(t=tt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(J(t,"requireFailure",this))return this;var e=this.requireFail;return-1===K(e,t=tt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(J(t,"dropRequireFailure",this))return this;t=tt(t,this);var e=K(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(c){n.manager.emit(c,t)}var n=this,s=this.state;nt>s&&e(n.options.event+Gt(s)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),s>=nt&&e(n.options.event+Gt(s))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=$)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&($|Qt)))return!1;t++}return!0},recognize:function(t){var e=u({},t);return pt(this.options.enable,[this,e])?(this.state&(B|qt|$)&&(this.state=Qt),this.state=this.process(e),void(this.state&(z|Pt|nt|qt)&&this.tryEmit(e))):(this.reset(),void(this.state=$))},process:function(t){},getTouchAction:function(){},reset:function(){}},p(M,L,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,s=e&(z|Pt),c=this.attrTest(t);return s&&(n&C||!c)?e|qt:s||c?n&g?e|nt:e&z?e|Pt:z:$}}),p(et,M,{defaults:{event:"pan",threshold:10,pointers:1,direction:he},getTouchAction:function(){var t=this.options.direction,e=[];return t&W&&e.push(zt),t&ft&&e.push(kt),e},directionTest:function(t){var e=this.options,n=!0,s=t.distance,c=t.direction,h=t.deltaX,f=t.deltaY;return c&e.direction||(e.direction&W?(c=0===h?Zt:0>h?Mt:jt,n=h!=this.pX,s=Math.abs(t.deltaX)):(c=0===f?Zt:0>f?Nt:_t,n=f!=this.pY,s=Math.abs(t.deltaY))),t.direction=c,n&&s>e.threshold&&c&e.direction},attrTest:function(t){return M.prototype.attrTest.call(this,t)&&(this.state&z||!(this.state&z)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=At(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(ct,M,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&z)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),p(_,L,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,s=t.distance<e.threshold,c=t.deltaTime>e.time;if(this._input=t,!s||!n||t.eventType&(g|C)&&!c)this.reset();else if(t.eventType&P)this.reset(),this._timer=rt(function(){this.state=B,this.tryEmit()},e.time,this);else if(t.eventType&g)return B;return $},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===B&&(t&&t.eventType&g?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=E(),this.manager.emit(this.options.event,this._input)))}}),p(lt,M,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&z)}}),p(ht,M,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:W|ft,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(W|ft)?e=t.overallVelocity:n&W?e=t.overallVelocityX:n&ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&v(e)>this.options.velocity&&t.eventType&g},emit:function(t){var e=At(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(k,L,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,s=t.distance<e.threshold,c=t.deltaTime<e.time;if(this.reset(),t.eventType&P&&0===this.count)return this.failTimeout();if(s&&c&&n){if(t.eventType!=g)return this.failTimeout();var h=!this.pTime||t.timeStamp-this.pTime<e.interval,f=!this.pCenter||ut(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,f&&h?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=rt(function(){this.state=B,this.tryEmit()},e.interval,this),z):B}return $},failTimeout:function(){return this._timer=rt(function(){this.state=$},this.options.interval,this),$},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==B&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),i.VERSION="2.0.7",i.defaults={domEvents:!1,touchAction:me,enable:!0,inputTarget:null,inputClass:null,preset:[[lt,{enable:!1}],[ct,{enable:!1},["rotate"]],[ht,{direction:W}],[et,{direction:W},["swipe"]],[k],[k,{event:"doubletap",taps:2},["tap"]],[_]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},r.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,s=this.recognizers,c=e.curRecognizer;(!c||c&&c.state&B)&&(c=e.curRecognizer=null);for(var h=0;h<s.length;)n=s[h],2===e.stopped||c&&n!=c&&!n.canRecognizeWith(c)?n.reset():n.recognize(t),!c&&n.state&(z|Pt|nt)&&(c=e.curRecognizer=n),h++}},get:function(t){if(t instanceof L)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(J(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(J(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=K(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==w&&e!==w){var n=this.handlers;return D(yt(t),function(s){n[s]=n[s]||[],n[s].push(e)}),this}},off:function(t,e){if(t!==w){var n=this.handlers;return D(yt(t),function(s){e?n[s]&&n[s].splice(K(n[s],e),1):delete n[s]}),this}},emit:function(t,e){this.options.domEvents&&function a(t,e){var n=Z.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var s=0;s<n.length;)n[s](e),s++}},destroy:function(){this.element&&o(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(i,{INPUT_START:P,INPUT_MOVE:R,INPUT_END:g,INPUT_CANCEL:C,STATE_POSSIBLE:Qt,STATE_BEGAN:z,STATE_CHANGED:Pt,STATE_ENDED:nt,STATE_RECOGNIZED:B,STATE_CANCELLED:qt,STATE_FAILED:$,DIRECTION_NONE:Zt,DIRECTION_LEFT:Mt,DIRECTION_RIGHT:jt,DIRECTION_UP:Nt,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:W,DIRECTION_VERTICAL:ft,DIRECTION_ALL:he,Manager:r,Input:I,TouchAction:Dt,TouchInput:Et,MouseInput:V,PointerEventInput:wt,TouchMouseInput:It,SingleTouchInput:Ut,Recognizer:L,AttrRecognizer:M,Tap:k,Pan:et,Swipe:ht,Pinch:ct,Rotate:lt,Press:_,on:j,off:gt,each:D,merge:x,extend:y,assign:u,inherit:p,bindFn:q,prefixed:mt}),(typeof T<"u"?T:typeof self<"u"?self:{}).Hammer=i,"function"==typeof define&&define.amd?define(function(){return i}):typeof module<"u"&&module.exports?module.exports=i:T.Hammer=i}(window,document);